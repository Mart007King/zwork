# wy-posts

## Properties

| Property                        | Attribute  | Type                                             | Default                                          | Description                           |
|---------------------------------|------------|--------------------------------------------------|--------------------------------------------------|---------------------------------------|
| `availableFeatures`             |            | `FeaturesListType \| undefined`                  |                                                  |                                       |
| `cssClass`                      | `cssClass` | `string \| undefined`                            |                                                  |                                       |
| `features`                      | `features` | `FeaturesConfigType`                             | {}                                               |                                       |
| `handleRealtimeCommentCreated`  |            | `(realtimeEvent: RealtimeCommentEventType) => void` | "(realtimeEvent: RealtimeCommentEventType) => {\n    if (!this.weavyContext \|\| realtimeEvent.actor.id === this.user!.id) {\n      return;\n    }\n\n    updateCacheItem(\n      this.weavyContext.queryClient,\n      [\"posts\", this.app!.id],\n      realtimeEvent.comment.parent!.id,\n      (item: PostType) => {\n        item.comment_count = (item.comment_count \|\| 0) + 1;\n      }\n    );\n\n    this.dispatchEvent(this.realtimeCommentCreatedEvent(realtimeEvent));\n  }" |                                       |
| `handleRealtimePostCreated`     |            | `(realtimeEvent: RealtimePostEventType) => void` | "(realtimeEvent: RealtimePostEventType) => {\n    if (\n      !this.weavyContext \|\|\n      realtimeEvent.post.app_id !== this.app!.id \|\|\n      realtimeEvent.post.created_by_id === this.user!.id\n    ) {\n      return;\n    }\n\n    realtimeEvent.post.created_by = realtimeEvent.actor;\n    addCacheItem(this.weavyContext.queryClient, [\"posts\", this.app!.id], realtimeEvent.post, undefined, {\n      descending: true,\n    });\n\n    this.dispatchEvent(this.realtimePostCreatedEvent(realtimeEvent));\n  }" |                                       |
| `handleRealtimeReactionAdded`   |            | `(realtimeEvent: RealtimeReactionEventType) => void` | "(realtimeEvent: RealtimeReactionEventType) => {\n    if (!this.weavyContext \|\| realtimeEvent.actor.id === this.user!.id \|\| realtimeEvent.entity.type !== \"post\") {\n      return;\n    }\n\n    updateCacheItem(\n      this.weavyContext.queryClient,\n      [\"posts\", this.app!.id],\n      realtimeEvent.entity.id,\n      (item: PostType) => {\n        item.reactions = [\n          ...(item.reactions \|\| []),\n          { content: realtimeEvent.reaction, created_by_id: realtimeEvent.actor.id },\n        ];\n      }\n    );\n\n    this.dispatchEvent(this.realtimeReactionAddedEvent(realtimeEvent));\n  }" |                                       |
| `handleRealtimeReactionDeleted` |            | `(realtimeEvent: RealtimeReactionEventType) => void` | "(realtimeEvent: RealtimeReactionEventType) => {\n    if (!this.weavyContext \|\| realtimeEvent.actor.id === this.user!.id \|\| realtimeEvent.entity.type !== \"post\") {\n      return;\n    }\n\n    updateCacheItem(\n      this.weavyContext.queryClient,\n      [\"posts\", this.app!.id],\n      realtimeEvent.entity.id,\n      (item: PostType) => {\n        item.reactions = item.reactions.filter((item) => item.created_by_id !== realtimeEvent.actor.id);\n      }\n    );\n\n    this.dispatchEvent(this.realtimeReactionRemovedEvent(realtimeEvent));\n  }" |                                       |
| `realtimeCommentCreatedEvent`   |            | `(realtimeEvent: RealtimeCommentEventType) => CustomEvent<RealtimeCommentEventType>` | "(realtimeEvent: RealtimeCommentEventType) =>\n    new CustomEvent(\"wy:comment_created\", { bubbles: true, composed: false, detail: realtimeEvent })" | Event: New comment created on a post. |
| `realtimePostCreatedEvent`      |            | `(realtimeEvent: RealtimePostEventType) => CustomEvent<RealtimePostEventType>` | "(realtimeEvent: RealtimePostEventType) =>\n    new CustomEvent(\"wy:post_created\", { bubbles: true, composed: false, detail: realtimeEvent })" | Event: New post created.              |
| `realtimeReactionAddedEvent`    |            | `(realtimeEvent: RealtimeReactionEventType) => CustomEvent<RealtimeReactionEventType>` | "(realtimeEvent: RealtimeReactionEventType) =>\n    new CustomEvent(\"wy:reaction_added\", { bubbles: true, composed: false, detail: realtimeEvent })" | Event: Post reaction added.           |
| `realtimeReactionRemovedEvent`  |            | `(realtimeEvent: RealtimeReactionEventType) => CustomEvent<RealtimeReactionEventType>` | "(realtimeEvent: RealtimeReactionEventType) =>\n    new CustomEvent(\"wy:reaction_removed\", { bubbles: true, composed: false, detail: realtimeEvent })" | Event: Post reaction removed.         |
| `uid`                           | `uid`      | `string \| undefined`                            |                                                  |                                       |
| `user`                          |            | `UserType \| undefined`                          |                                                  |                                       |

## Methods

| Method          | Type                                             |
|-----------------|--------------------------------------------------|
| `performUpdate` | `(): Promise<void>`                              |
| `willUpdate`    | `(changedProperties: PropertyValues<this & WeavyContextProps & { app: AppType; }>): void` |

## Events

| Event                 | Type                                     |
|-----------------------|------------------------------------------|
| `wy:comment_created`  | `CustomEvent<RealtimeCommentEventType>`  |
| `wy:post_created`     | `CustomEvent<RealtimePostEventType>`     |
| `wy:reaction_added`   | `CustomEvent<RealtimeReactionEventType>` |
| `wy:reaction_removed` | `CustomEvent<RealtimeReactionEventType>` |
